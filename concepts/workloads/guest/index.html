
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://github.com/vmware-tanzu/vm-operator/concepts/workloads/guest/">
      
      
        <link rel="prev" href="../vm-web-console/">
      
      
        <link rel="next" href="../../images/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.2">
    
    
      
        <title>Guest Customization - VM Operator</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.d451bc0e.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../www/css/vm-operator.css">
    
      <link rel="stylesheet" href="../../../www/css/vm-operator-font.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#customizing-a-guest" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="VM Operator" class="md-header__button md-logo" aria-label="VM Operator" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            VM Operator
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Guest Customization
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/vmware-tanzu/vm-operator" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="VM Operator" class="md-nav__button md-logo" aria-label="VM Operator" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    VM Operator
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/vmware-tanzu/vm-operator" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../start/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../start/quick/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quickstart
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../start/help/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Talk to Us
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Contribute
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Contribute
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../start/contrib/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contribute
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../start/contrib/suggest-change/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Suggest a Change
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../start/contrib/report-issue/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Report an Issue
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../start/contrib/submit-change/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Submit a Change
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    About
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../start/about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../start/about/roadmap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Roadmap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../start/about/release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Release Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../start/about/license/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    License
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Concepts
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Concepts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" checked>
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Workloads
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Workloads
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Workloads
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../vm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VirtualMachine
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../vm-class/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VirtualMachineClass
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../vm-web-console/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WebConsoleRequest
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Guest Customization
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Guest Customization
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#bootstrap-providers" class="md-nav__link">
    Bootstrap Providers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#supported" class="md-nav__link">
    Supported
  </a>
  
    <nav class="md-nav" aria-label="Supported">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cloud-init" class="md-nav__link">
    Cloud-Init
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sysprep" class="md-nav__link">
    Sysprep
  </a>
  
    <nav class="md-nav" aria-label="Sysprep">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#minimal-config" class="md-nav__link">
    Minimal Config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#activate-windows" class="md-nav__link">
    Activate Windows
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-accounts" class="md-nav__link">
    User Accounts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#automate-oobe" class="md-nav__link">
    Automate OOBE
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vappconfig" class="md-nav__link">
    vAppConfig
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deprecated" class="md-nav__link">
    Deprecated
  </a>
  
    <nav class="md-nav" aria-label="Deprecated">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ovfenv" class="md-nav__link">
    OvfEnv
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extraconfig" class="md-nav__link">
    ExtraConfig
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Images
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Images
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../images/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Images
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../images/vm-image/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VirtualMachineImage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../images/pub-vm-image/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Publish a VM Image
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Services & Networking
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Services & Networking
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../services-networking/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Services & Networking
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../services-networking/vm-service/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VirtualMachineService
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../services-networking/guest-net-config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Guest Network Config
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Deploy VM
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Deploy VM
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/deploy-vm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deploy a VM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/deploy-vm/cloudinit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    With Cloud-Init
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/deploy-vm/vappconfig/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    With vAppConfig
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Deploy apps
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Deploy apps
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/deploy-apps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deploy applications
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/deploy-apps/nfs-server-and-client/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NFS server and client
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Troubleshooting
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Troubleshooting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Troubleshooting
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/troubleshooting/get-console-session/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get a Console Session
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/troubleshooting/deploy-vm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VM Deployment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/troubleshooting/ip-assignment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IP Assignment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/troubleshooting/publish-vm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VM Publish
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../ref/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reference
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../ref/api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../ref/api/v1alpha1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    v1alpha1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../ref/api/v1alpha2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    v1alpha2
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            Configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../ref/config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../ref/config/manager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Manager Pod
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Project
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            Project
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../ref/proj/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Project
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../ref/proj/build/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Build from Source
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../ref/proj/release/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create a Release
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../ref/proj/docs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Writing Documentation
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#bootstrap-providers" class="md-nav__link">
    Bootstrap Providers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#supported" class="md-nav__link">
    Supported
  </a>
  
    <nav class="md-nav" aria-label="Supported">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cloud-init" class="md-nav__link">
    Cloud-Init
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sysprep" class="md-nav__link">
    Sysprep
  </a>
  
    <nav class="md-nav" aria-label="Sysprep">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#minimal-config" class="md-nav__link">
    Minimal Config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#activate-windows" class="md-nav__link">
    Activate Windows
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-accounts" class="md-nav__link">
    User Accounts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#automate-oobe" class="md-nav__link">
    Automate OOBE
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vappconfig" class="md-nav__link">
    vAppConfig
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deprecated" class="md-nav__link">
    Deprecated
  </a>
  
    <nav class="md-nav" aria-label="Deprecated">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ovfenv" class="md-nav__link">
    OvfEnv
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extraconfig" class="md-nav__link">
    ExtraConfig
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="customizing-a-guest">Customizing a Guest</h1>
<p>The ability to deploy a virtual machine with Kubernetes is nice, but one of the values of VM Operator is its support for popular bootstrap providers such as Cloud-Init, Sysprep, and vAppConfig. This page reviews these bootstrap providers to help inform when to select one over the other.</p>
<h2 id="bootstrap-providers">Bootstrap Providers</h2>
<p>There are a number of methods that may be used to bootstrap a virtual machine's (VM) guest operating system:</p>
<table>
<thead>
<tr>
<th>Provider</th>
<th style="text-align: center;">Supported</th>
<th>Network Config</th>
<th style="text-align: center;">Linux</th>
<th style="text-align: center;">Windows</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#cloud-init">Cloud-Init</a></td>
<td style="text-align: center;">✓</td>
<td><a href="https://cloudinit.readthedocs.io/en/latest/reference/network-config-format-v2.html">Cloud-Init Network v2</a></td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;">✓</td>
<td>The industry standard, multi-distro method for cross-platform, cloud instance initialization with modern, VM images</td>
</tr>
<tr>
<td><a href="#sysprep">Sysprep</a></td>
<td style="text-align: center;">✓</td>
<td><a href="https://vdc-download.vmware.com/vmwb-repository/dcr-public/c476b64b-c93c-4b21-9d76-be14da0148f9/04ca12ad-59b9-4e1c-8232-fd3d4276e52c/SDK/vsphere-ws/docs/ReferenceGuide/vim.vm.customization.Specification.html">Guest OS Customization</a> (GOSC)</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">✓</td>
<td>Microsoft Sysprep is used by VMware to customize Windows images on first-boot</td>
</tr>
<tr>
<td><a href="#vappconfig">vAppConfig</a></td>
<td style="text-align: center;">✓</td>
<td>Bespoke</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;"></td>
<td>For images with bespoke, bootstrap engines driven by vAppConfig properties</td>
</tr>
<tr>
<td><a href="#ovfenv">OvfEnv</a></td>
<td style="text-align: center;"><em>deprecated</em></td>
<td><a href="https://vdc-download.vmware.com/vmwb-repository/dcr-public/c476b64b-c93c-4b21-9d76-be14da0148f9/04ca12ad-59b9-4e1c-8232-fd3d4276e52c/SDK/vsphere-ws/docs/ReferenceGuide/vim.vm.customization.Specification.html">Guest OS Customization</a> (GOSC)</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;"></td>
<td>A combination of GOSC and Cloud-Init user-data</td>
</tr>
<tr>
<td><a href="#extraconfig">ExtraConfig</a></td>
<td style="text-align: center;"><em>deprecated</em></td>
<td>GOSC</td>
<td style="text-align: center;">✓</td>
<td style="text-align: center;"></td>
<td>For images with bespoke, bootstrap engines that rely on Guest Info data</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title"><code>ConfigMap</code> or <code>Secret</code></p>
<p>The choice of a <code>ConfigMap</code> or <code>Secret</code> resource in no way impacts the choice or behavior of the selected bootstrap provider. When VM Operator was first released, the only way to store bootstrap data was via a <code>ConfigMap</code> resource. While this still works, it is not recommended as data stored in a <code>ConfigMap</code> is not encrypted at rest. Instead, it is recommended users switch to using <code>Secret</code> resources for storing bootstrap data. Aside from how the data is stored in etcd, the following two resources are effectively identical and serve the same purpose:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">CloudConfig in a ConfigMap</label><label for="__tabbed_1_2">CloudConfig in a Secret</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">my-vm-bootstrap-data</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-namespace</span>
<span class="nt">data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">user-data</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">#cloud-config</span>
<span class="w">    </span><span class="no">users:</span>
<span class="w">    </span><span class="no">- default</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Secret</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">my-vm-bootstrap-data</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-namespace</span>
<span class="nt">stringData</span><span class="p">:</span>
<span class="w">  </span><span class="nt">user-data</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">#cloud-config</span>
<span class="w">    </span><span class="no">users:</span>
<span class="w">    </span><span class="no">- default</span>
</code></pre></div>
</div>
</div>
</div>
</div>
<h2 id="supported">Supported</h2>
<h3 id="cloud-init">Cloud-Init</h3>
<p><a href="https://cloudinit.readthedocs.io/en/latest/">Cloud-Init</a> is widely recognized as the de facto method for bootstrapping modern VM instances on hyperscalers, including Tanzu with VM Operator. For example, the following resources may be used to deploy a VM and bootstrap its guest with Cloud-Init to:</p>
<ul>
<li>add a custom user</li>
<li>execute commands on boot</li>
<li>write files</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">VirtualMachine</label><label for="__tabbed_2_2">CloudConfig</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vmoperator.vmware.com/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VirtualMachine</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">my-vm</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-namespace</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">className</span><span class="p">:</span><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">small</span>
<span class="w">  </span><span class="nt">imageName</span><span class="p">:</span><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-2210</span>
<span class="w">  </span><span class="nt">storageClass</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">iscsi</span>
<span class="w">  </span><span class="nt">vmMetadata</span><span class="p">:</span>
<span class="w">    </span><span class="nt">transport</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CloudInit</span>
<span class="w">    </span><span class="nt">secretName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-vm-bootstrap-data</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Secret</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">my-vm-bootstrap-data</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-namespace</span>
<span class="nt">stringData</span><span class="p">:</span>
<span class="w">  </span><span class="nt">user-data</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">#cloud-config</span>
<span class="w">    </span><span class="no">users:</span>
<span class="w">    </span><span class="no">- default</span>
<span class="w">    </span><span class="no">- name: akutz</span>
<span class="w">      </span><span class="no">primary_group: akutz</span>
<span class="w">      </span><span class="no">groups: users</span>
<span class="w">      </span><span class="no">ssh_authorized_keys:</span>
<span class="w">      </span><span class="no">- ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj...</span>
<span class="w">    </span><span class="no">runcmd:</span>
<span class="w">    </span><span class="no">- &quot;ls /&quot;</span>
<span class="w">    </span><span class="no">- [ &quot;ls&quot;, &quot;-a&quot;, &quot;-l&quot;, &quot;/&quot; ]</span>
<span class="w">    </span><span class="no">write_files:</span>
<span class="w">    </span><span class="no">- path: /etc/my-plaintext</span>
<span class="w">      </span><span class="no">permissions: &#39;0644&#39;</span>
<span class="w">      </span><span class="no">owner: root:root</span>
<span class="w">      </span><span class="no">content: |</span>
<span class="w">        </span><span class="no">Hello, world.</span>
</code></pre></div>
</div>
</div>
</div>
<p>The data in the above <code>Secret</code> is called the Cloud-Init <em>Cloud Config</em>. For more information on the Cloud-Init Cloud Config format, please see its <a href="https://cloudinit.readthedocs.io/en/latest/reference/examples.html">official documentation</a>.</p>
<div class="admonition note">
<p class="admonition-title">Windows and Cloud-Init</p>
<p>It is possible to use the Cloud-Init bootstrap provider to deploy a Windows image if it contains <a href="https://cloudbase.it/cloudbase-init/">Cloudbase-Init</a>, the Windows port of Cloud-Init.</p>
</div>
<h3 id="sysprep">Sysprep</h3>
<p>Microsoft originally designed Sysprep as a means to prepare a deployed system for use as a template. It was such a useful tool, that VMware utilized it as the means to customize a VM with a Windows guest.</p>
<div class="admonition note">
<p class="admonition-title">Sysprep State</p>
<p>Deploying Windows images that have not completed their previous Sysprep operation could cause the Guest OS customization to fail. Therefore, it is important to ensure that the image is sealed correctly and in a clean state when using Sysprep. For more information on this issue, please refer to <a href="https://kb.vmware.com/s/article/86350">this article</a>.</p>
</div>
<h4 id="minimal-config">Minimal Config</h4>
<p>The following YAML may be used to bootstrap a Windows image with minimal information. For proper network configuration and Guest OS Customization (GOSC) completion, Sysprep unattend data requires a template for providing network info and <code>RunSynchronousCommand</code> to record GOSC status. Both components are essential for Windows Vista and later versions.</p>
<div class="admonition note">
<p class="admonition-title">Product Key</p>
<p>Please note the image would have to be using a Volume License SKU as the product ID is not provided in the following Sysprep configuration. See the "Activate Windows" section below for more information.</p>
</div>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">VirtualMachine</label><label for="__tabbed_3_2">SysprepConfig</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vmoperator.vmware.com/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VirtualMachine</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">my-vm</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-namespace</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">className</span><span class="p">:</span><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">small</span>
<span class="w">  </span><span class="nt">imageName</span><span class="p">:</span><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">windows11</span>
<span class="w">  </span><span class="nt">storageClass</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">iscsi</span>
<span class="w">  </span><span class="nt">vmMetadata</span><span class="p">:</span>
<span class="w">    </span><span class="nt">transport</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sysprep</span>
<span class="w">    </span><span class="nt">secretName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-vm-bootstrap-data</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Secret</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-vm-bootstrap-data</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-ns</span>
<span class="nt">stringData</span><span class="p">:</span>
<span class="w">  </span><span class="nt">unattend</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="w">    </span><span class="no">&lt;unattend xmlns=&quot;urn:schemas-microsoft-com:unattend&quot;&gt;</span>
<span class="w">      </span><span class="no">&lt;settings pass=&quot;specialize&quot;&gt;</span>
<span class="w">        </span><span class="no">&lt;component name=&quot;Microsoft-Windows-TCPIP&quot; processorArchitecture=&quot;amd64&quot;</span>
<span class="w">          </span><span class="no">publicKeyToken=&quot;31bf3856ad364e35&quot; language=&quot;neutral&quot; versionScope=&quot;nonSxS&quot;</span>
<span class="w">          </span><span class="no">xmlns:wcm=&quot;http://schemas.microsoft.com/WMIConfig/2002/State&quot;</span>
<span class="w">          </span><span class="no">xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;</span>
<span class="w">          </span><span class="no">&lt;Interfaces&gt;</span>
<span class="w">            </span><span class="no">&lt;Interface wcm:action=&quot;add&quot;&gt;</span>
<span class="w">              </span><span class="no">&lt;Ipv4Settings&gt;</span>
<span class="w">                </span><span class="no">&lt;DhcpEnabled&gt;false&lt;/DhcpEnabled&gt;</span>
<span class="w">              </span><span class="no">&lt;/Ipv4Settings&gt;</span>
<span class="w">              </span><span class="no">&lt;Ipv6Settings&gt;</span>
<span class="w">                </span><span class="no">&lt;DhcpEnabled&gt;false&lt;/DhcpEnabled&gt;</span>
<span class="w">              </span><span class="no">&lt;/Ipv6Settings&gt;</span>
<span class="w">              </span><span class="no">&lt;Identifier&gt;{{ V1alpha1_FirstNicMacAddr }}&lt;/Identifier&gt;</span>
<span class="w">              </span><span class="no">&lt;UnicastIpAddresses&gt;</span>
<span class="w">                </span><span class="no">&lt;IpAddress wcm:action=&quot;add&quot; wcm:keyValue=&quot;1&quot;&gt;{{ V1alpha1_FirstIP }}&lt;/IpAddress&gt;</span>
<span class="w">              </span><span class="no">&lt;/UnicastIpAddresses&gt;</span>
<span class="w">              </span><span class="no">&lt;Routes&gt;</span>
<span class="w">                </span><span class="no">&lt;Route wcm:action=&quot;add&quot;&gt;</span>
<span class="w">                  </span><span class="no">&lt;Identifier&gt;0&lt;/Identifier&gt;</span>
<span class="w">                  </span><span class="no">&lt;Metric&gt;10&lt;/Metric&gt;</span>
<span class="w">                  </span><span class="no">&lt;NextHopAddress&gt;{{ (index .V1alpha1.Net.Devices 0).Gateway4 }}&lt;/NextHopAddress&gt;</span>
<span class="w">                  </span><span class="no">&lt;Prefix&gt;{{ V1alpha1_SubnetMask V1alpha1_FirstIP }}&lt;/Prefix&gt;</span>
<span class="w">                </span><span class="no">&lt;/Route&gt;</span>
<span class="w">              </span><span class="no">&lt;/Routes&gt;</span>
<span class="w">            </span><span class="no">&lt;/Interface&gt;</span>
<span class="w">          </span><span class="no">&lt;/Interfaces&gt;</span>
<span class="w">        </span><span class="no">&lt;/component&gt;</span>
<span class="w">        </span><span class="no">&lt;component name=&quot;Microsoft-Windows-DNS-Client&quot; processorArchitecture=&quot;amd64&quot;</span>
<span class="w">          </span><span class="no">publicKeyToken=&quot;31bf3856ad364e35&quot; language=&quot;neutral&quot; versionScope=&quot;nonSxS&quot;</span>
<span class="w">          </span><span class="no">xmlns:wcm=&quot;http://schemas.microsoft.com/WMIConfig/2002/State&quot;</span>
<span class="w">          </span><span class="no">xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;</span>
<span class="w">          </span><span class="no">&lt;Interfaces&gt;</span>
<span class="w">            </span><span class="no">&lt;Interface wcm:action=&quot;add&quot;&gt;</span>
<span class="w">              </span><span class="no">&lt;Identifier&gt;{{ V1alpha1_FirstNicMacAddr }}&lt;/Identifier&gt;</span>
<span class="w">              </span><span class="no">&lt;DNSServerSearchOrder&gt; {{ range .V1alpha1.Net.Nameservers }} &lt;IpAddress</span>
<span class="w">                  </span><span class="no">wcm:action=&quot;add&quot;</span>
<span class="w">                  </span><span class="no">wcm:keyValue=&quot;{{.}}&quot;&gt;&lt;/IpAddress&gt; {{ end }} &lt;/DNSServerSearchOrder&gt;</span>
<span class="w">            </span><span class="no">&lt;/Interface&gt;</span>
<span class="w">          </span><span class="no">&lt;/Interfaces&gt;</span>
<span class="w">        </span><span class="no">&lt;/component&gt;</span>
<span class="w">        </span><span class="no">&lt;component name=&quot;Microsoft-Windows-Deployment&quot; processorArchitecture=&quot;amd64&quot;</span>
<span class="w">          </span><span class="no">publicKeyToken=&quot;31bf3856ad364e35&quot; language=&quot;neutral&quot; versionScope=&quot;nonSxS&quot;</span>
<span class="w">          </span><span class="no">xmlns:wcm=&quot;http://schemas.microsoft.com/WMIConfig/2002/State&quot;</span>
<span class="w">          </span><span class="no">xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;</span>
<span class="w">          </span><span class="no">&lt;RunSynchronous&gt;</span>
<span class="w">            </span><span class="no">&lt;RunSynchronousCommand wcm:action=&quot;add&quot;&gt;</span>
<span class="w">              </span><span class="no">&lt;Path&gt;C:\sysprep\guestcustutil.exe restoreMountedDevices&lt;/Path&gt;</span>
<span class="w">              </span><span class="no">&lt;Order&gt;1&lt;/Order&gt;</span>
<span class="w">            </span><span class="no">&lt;/RunSynchronousCommand&gt;</span>
<span class="w">            </span><span class="no">&lt;RunSynchronousCommand wcm:action=&quot;add&quot;&gt;</span>
<span class="w">              </span><span class="no">&lt;Path&gt;C:\sysprep\guestcustutil.exe flagComplete&lt;/Path&gt;</span>
<span class="w">              </span><span class="no">&lt;Order&gt;2&lt;/Order&gt;</span>
<span class="w">            </span><span class="no">&lt;/RunSynchronousCommand&gt;</span>
<span class="w">            </span><span class="no">&lt;RunSynchronousCommand wcm:action=&quot;add&quot;&gt;</span>
<span class="w">              </span><span class="no">&lt;Path&gt;C:\sysprep\guestcustutil.exe deleteContainingFolder&lt;/Path&gt;</span>
<span class="w">              </span><span class="no">&lt;Order&gt;3&lt;/Order&gt;</span>
<span class="w">            </span><span class="no">&lt;/RunSynchronousCommand&gt;</span>
<span class="w">          </span><span class="no">&lt;/RunSynchronous&gt;</span>
<span class="w">        </span><span class="no">&lt;/component&gt;</span>
<span class="w">      </span><span class="no">&lt;/settings&gt;</span>
<span class="w">    </span><span class="no">&lt;/unattend&gt;</span>
</code></pre></div>
</div>
</div>
</div>
<h4 id="activate-windows">Activate Windows</h4>
<p>The following XML can be used to supply a product key to activate Windows:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;settings</span><span class="w"> </span><span class="na">pass=</span><span class="s">&quot;windowsPE&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;component</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Microsoft-Windows-Setup&quot;</span><span class="w"> </span><span class="na">processorArchitecture=</span><span class="s">&quot;amd64&quot;</span>
<span class="w">    </span><span class="na">publicKeyToken=</span><span class="s">&quot;31bf3856ad364e35&quot;</span><span class="w"> </span><span class="na">language=</span><span class="s">&quot;neutral&quot;</span><span class="w"> </span><span class="na">versionScope=</span><span class="s">&quot;nonSxS&quot;</span>
<span class="w">    </span><span class="na">xmlns:wcm=</span><span class="s">&quot;http://schemas.microsoft.com/WMIConfig/2002/State&quot;</span>
<span class="w">    </span><span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;UserData&gt;</span>
<span class="w">      </span><span class="nt">&lt;AcceptEula&gt;</span>true<span class="nt">&lt;/AcceptEula&gt;</span>
<span class="w">      </span><span class="nt">&lt;FullName&gt;</span>akutz<span class="nt">&lt;/FullName&gt;</span>
<span class="w">      </span><span class="nt">&lt;Organization&gt;</span>VMware<span class="nt">&lt;/Organization&gt;</span>
<span class="w">      </span><span class="nt">&lt;ProductKey&gt;</span>
<span class="w">        </span><span class="nt">&lt;Key&gt;</span>1234-5678-9abc-defg<span class="nt">&lt;/Key&gt;</span>
<span class="w">        </span><span class="nt">&lt;WillShowUI&gt;</span>Never<span class="nt">&lt;/WillShowUI&gt;</span>
<span class="w">      </span><span class="nt">&lt;/ProductKey&gt;</span>
<span class="w">    </span><span class="nt">&lt;/UserData&gt;</span>
<span class="w">  </span><span class="nt">&lt;/component&gt;</span>
<span class="nt">&lt;/settings&gt;</span>
</code></pre></div>
<h4 id="user-accounts">User Accounts</h4>
<p>The following XML can be used to update Administrator password and create a new local user account:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;settings</span><span class="w"> </span><span class="na">pass=</span><span class="s">&quot;oobeSystem&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;component</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Microsoft-Windows-Shell-Setup&quot;</span><span class="w"> </span><span class="na">processorArchitecture=</span><span class="s">&quot;amd64&quot;</span>
<span class="w">    </span><span class="na">publicKeyToken=</span><span class="s">&quot;31bf3856ad364e35&quot;</span><span class="w"> </span><span class="na">language=</span><span class="s">&quot;neutral&quot;</span><span class="w"> </span><span class="na">versionScope=</span><span class="s">&quot;nonSxS&quot;</span>
<span class="w">    </span><span class="na">xmlns:wcm=</span><span class="s">&quot;http://schemas.microsoft.com/WMIConfig/2002/State&quot;</span>
<span class="w">    </span><span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;UserAccounts&gt;</span>
<span class="w">      </span><span class="nt">&lt;AdministratorPassword&gt;</span>
<span class="w">        </span><span class="nt">&lt;Value&gt;</span>FakePassword<span class="nt">&lt;/Value&gt;</span>
<span class="w">        </span><span class="nt">&lt;PlainText&gt;</span>true<span class="nt">&lt;/PlainText&gt;</span>
<span class="w">      </span><span class="nt">&lt;/AdministratorPassword&gt;</span>
<span class="w">      </span><span class="nt">&lt;LocalAccounts&gt;</span>
<span class="w">        </span><span class="nt">&lt;LocalAccount</span><span class="w"> </span><span class="na">wcm:action=</span><span class="s">&quot;add&quot;</span><span class="nt">&gt;</span>
<span class="w">          </span><span class="nt">&lt;Name&gt;</span>sdiliyaer<span class="nt">&lt;/Name&gt;</span>
<span class="w">          </span><span class="nt">&lt;Password&gt;</span>
<span class="w">            </span><span class="nt">&lt;Value&gt;</span>vmware<span class="nt">&lt;/Value&gt;</span>
<span class="w">            </span><span class="nt">&lt;PlainText&gt;</span>true<span class="nt">&lt;/PlainText&gt;</span>
<span class="w">          </span><span class="nt">&lt;/Password&gt;</span>
<span class="w">          </span><span class="nt">&lt;Group&gt;</span>Administrators<span class="nt">&lt;/Group&gt;</span>
<span class="w">          </span><span class="nt">&lt;DisplayName&gt;</span>sdiliyaer<span class="nt">&lt;/DisplayName&gt;</span>
<span class="w">          </span><span class="nt">&lt;Description&gt;</span>Local<span class="w"> </span>administrator<span class="w"> </span>account<span class="nt">&lt;/Description&gt;</span>
<span class="w">        </span><span class="nt">&lt;/LocalAccount&gt;</span>
<span class="w">      </span><span class="nt">&lt;/LocalAccounts&gt;</span>
<span class="w">    </span><span class="nt">&lt;/UserAccounts&gt;</span>
<span class="w">  </span><span class="nt">&lt;/component&gt;</span>
<span class="nt">&lt;/settings&gt;</span>
</code></pre></div>
<h4 id="automate-oobe">Automate OOBE</h4>
<p>The following XML can be used to prevent appearing the Windows OOBE screen:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;settings</span><span class="w"> </span><span class="na">pass=</span><span class="s">&quot;oobeSystem&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;component</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Microsoft-Windows-International-Core&quot;</span><span class="w"> </span><span class="na">processorArchitecture=</span><span class="s">&quot;amd64&quot;</span>
<span class="w">    </span><span class="na">publicKeyToken=</span><span class="s">&quot;31bf3856ad364e35&quot;</span><span class="w"> </span><span class="na">language=</span><span class="s">&quot;neutral&quot;</span><span class="w"> </span><span class="na">versionScope=</span><span class="s">&quot;nonSxS&quot;</span>
<span class="w">    </span><span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;InputLocale&gt;</span>0409:00000409<span class="nt">&lt;/InputLocale&gt;</span>
<span class="w">    </span><span class="nt">&lt;SystemLocale&gt;</span>en-US<span class="nt">&lt;/SystemLocale&gt;</span>
<span class="w">    </span><span class="nt">&lt;UserLocale&gt;</span>en-US<span class="nt">&lt;/UserLocale&gt;</span>
<span class="w">    </span><span class="nt">&lt;UILanguage&gt;</span>en-US<span class="nt">&lt;/UILanguage&gt;</span>
<span class="w">  </span><span class="nt">&lt;/component&gt;</span>
<span class="w">  </span><span class="nt">&lt;component</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;Microsoft-Windows-Shell-Setup&quot;</span><span class="w"> </span><span class="na">processorArchitecture=</span><span class="s">&quot;amd64&quot;</span>
<span class="w">    </span><span class="na">publicKeyToken=</span><span class="s">&quot;31bf3856ad364e35&quot;</span><span class="w"> </span><span class="na">language=</span><span class="s">&quot;neutral&quot;</span><span class="w"> </span><span class="na">versionScope=</span><span class="s">&quot;nonSxS&quot;</span>
<span class="w">    </span><span class="na">xmlns:wcm=</span><span class="s">&quot;http://schemas.microsoft.com/WMIConfig/2002/State&quot;</span>
<span class="w">    </span><span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;OOBE&gt;</span>
<span class="w">      </span><span class="nt">&lt;HideEULAPage&gt;</span>true<span class="nt">&lt;/HideEULAPage&gt;</span>
<span class="w">      </span><span class="nt">&lt;HideLocalAccountScreen&gt;</span>true<span class="nt">&lt;/HideLocalAccountScreen&gt;</span>
<span class="w">      </span><span class="nt">&lt;HideOEMRegistrationScreen&gt;</span>true<span class="nt">&lt;/HideOEMRegistrationScreen&gt;</span>
<span class="w">      </span><span class="nt">&lt;HideOnlineAccountScreens&gt;</span>true<span class="nt">&lt;/HideOnlineAccountScreens&gt;</span>
<span class="w">      </span><span class="nt">&lt;HideWirelessSetupInOOBE&gt;</span>true<span class="nt">&lt;/HideWirelessSetupInOOBE&gt;</span>
<span class="w">      </span><span class="nt">&lt;ProtectYourPC&gt;</span>3<span class="nt">&lt;/ProtectYourPC&gt;</span>
<span class="w">      </span><span class="nt">&lt;SkipMachineOOBE&gt;</span>true<span class="nt">&lt;/SkipMachineOOBE&gt;</span>
<span class="w">      </span><span class="nt">&lt;SkipUserOOBE&gt;</span>true<span class="nt">&lt;/SkipUserOOBE&gt;</span>
<span class="w">    </span><span class="nt">&lt;/OOBE&gt;</span>
<span class="w">    </span><span class="nt">&lt;TimeZone&gt;</span>Central<span class="w"> </span>Standard<span class="w"> </span>Time<span class="nt">&lt;/TimeZone&gt;</span>
<span class="w">  </span><span class="nt">&lt;/component&gt;</span>
<span class="nt">&lt;/settings&gt;</span>
</code></pre></div>
<p>For more information on Sysprep, please refer to Microsoft's <a href="https://learn.microsoft.com/en-us/windows-hardware/customize/desktop/unattend/">official documentation</a>.</p>
<h3 id="vappconfig">vAppConfig</h3>
<p>The vAppConfig bootstrap method is useful for legacy, VM images that rely on bespoke, boot-time processes that leverage vAppConfig properties for customizing a guest.</p>
<p>To illustrate, the following YAML can be utilized to deploy a VirtualMachine and bootstrap OVF properties that define the network information:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:3"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><input id="__tabbed_4_3" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">VirtualMachine</label><label for="__tabbed_4_2">vAppConfig</label><label for="__tabbed_4_3">vAppConfig with templated data</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vmoperator.vmware.com/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VirtualMachine</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">my-vm</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-namespace</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">className</span><span class="p">:</span><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">small</span>
<span class="w">  </span><span class="nt">imageName</span><span class="p">:</span><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">my-vm-image</span>
<span class="w">  </span><span class="nt">storageClass</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-storage-class</span>
<span class="w">  </span><span class="nt">vmMetadata</span><span class="p">:</span>
<span class="w">    </span><span class="nt">transport</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vAppConfig</span>
<span class="w">    </span><span class="nt">secretName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-vm-bootstrap-template</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Secret</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-vm-bootstrap-template</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-namespace</span>
<span class="nt">stringData</span><span class="p">:</span>
<span class="w">  </span><span class="nt">nameservers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">(index</span><span class="nv"> </span><span class="s">.V1alpha1.Net.Nameservers</span><span class="nv"> </span><span class="s">0)</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">  </span><span class="nt">hostname</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">.V1alpha1.VM.Name</span><span class="nv"> </span><span class="s">}}</span><span class="nv"> </span><span class="s">&quot;</span>
<span class="w">  </span><span class="nt">management_ip</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">(index</span><span class="nv"> </span><span class="s">(index</span><span class="nv"> </span><span class="s">.V1alpha1.Net.Devices</span><span class="nv"> </span><span class="s">0).IPAddresses</span><span class="nv"> </span><span class="s">0)</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">  </span><span class="nt">management_gateway</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">(index</span><span class="nv"> </span><span class="s">.V1alpha1.Net.Devices</span><span class="nv"> </span><span class="s">0).Gateway4</span><span class="nv"> </span><span class="s">}}&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Secret</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-secret</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test-ns</span>
<span class="nt">stringData</span><span class="p">:</span>
<span class="w">  </span><span class="nt">nameservers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">V1alpha1_FormatNameservers</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">\&quot;,\&quot;</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">  </span><span class="nt">management_ip</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">V1alpha1_FormatIP</span><span class="nv"> </span><span class="s">\&quot;192.168.1.10\&quot;</span><span class="nv"> </span><span class="s">\&quot;255.255.255.0\&quot;</span><span class="nv"> </span><span class="s">}}&quot;</span>
<span class="w">  </span><span class="nt">hostname</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">.V1alpha1.VM.Name</span><span class="nv"> </span><span class="s">}}</span><span class="nv"> </span><span class="s">&quot;</span><span class="w">  </span>
<span class="w">  </span><span class="nt">management_gateway</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">(index</span><span class="nv"> </span><span class="s">.V1alpha1.Net.Devices</span><span class="nv"> </span><span class="s">0).Gateway4</span><span class="nv"> </span><span class="s">}}&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<p>For more information on vAppConfig, please refer to this <a href="../../../tutorials/deploy-vm/vappconfig/">tutorial</a>.</p>
<h2 id="deprecated">Deprecated</h2>
<p>The following bootstrap providers are still available, but they are deprecated and are not recommended.</p>
<h3 id="ovfenv">OvfEnv</h3>
<p>The <code>OvfEnv</code> method combines VMware's Guest OS Customization (GOSC) for bootstrapping a guest's network and the Cloud-Init, OVF data source to supply a Cloud-Init Cloud Config.</p>
<div class="admonition warning">
<p class="admonition-title">Deprecation Notice</p>
<p>The <code>OvfEnv</code> transport has been deprecated in favor of the <code>CloudInit</code> provider. Apart from the reasons outlined in the <a href="#cloud-init">Cloud-Init</a> section on why one would want to use Cloud-Init, the <code>OvfEnv</code> provider's reliance on the GOSC APIs for bootstrapping the guest's network and Cloud-Init for additional customizations resulted in a race condition. VMware Tools would reboot the guest to satisfy the GOSC network configuration while Cloud-Init was still running. Thus any image that used <code>OvfEnv</code> needed to have a special fix applied to prevent Cloud-Init from running on first-boot. This method is removed in v1alpha2, and any consumers still relying on this provider should switch to Cloud-Init.</p>
</div>
<p>The following resources may be used to deploy a VM and bootstrap the guest's network with GOSC and then leverage Cloud-Init to:</p>
<ul>
<li>add a custom user</li>
<li>execute commands on boot</li>
<li>write files</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">VirtualMachine</label><label for="__tabbed_5_2">CloudConfig</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vmoperator.vmware.com/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VirtualMachine</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">my-vm</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-namespace</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">className</span><span class="p">:</span><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">small</span>
<span class="w">  </span><span class="nt">imageName</span><span class="p">:</span><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-2210</span>
<span class="w">  </span><span class="nt">storageClass</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">iscsi</span>
<span class="w">  </span><span class="nt">vmMetadata</span><span class="p">:</span>
<span class="w">    </span><span class="nt">transport</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">OvfEnv</span>
<span class="w">    </span><span class="nt">configMapName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-vm-bootstrap-data</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">my-vm-bootstrap-data</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-namespace</span>
<span class="nt">data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">user-data</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">I2Nsb3VkLWNvbmZpZwp1c2VyczoKLSBkZWZhdWx0Ci0gbmFtZTogYWt1dHoKICBwcmltYXJ5X2dyb3VwOiBha3V0egogIGdyb3VwczogdXNlcnMKICBzc2hfYXV0aG9yaXplZF9rZXlzOgogIC0gc3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCQVFEU0w3dVdHai4uLgpydW5jbWQ6Ci0gImxzIC8iCi0gWyAibHMiLCAiLWEiLCAiLWwiLCAiLyIgXQp3cml0ZV9maWxlczoKLSBwYXRoOiAvZXRjL215LXBsYWludGV4dAogIHBlcm1pc3Npb25zOiAnMDY0NCcKICBvd25lcjogcm9vdDpyb290CiAgY29udGVudDogfAogICAgSGVsbG8sIHdvcmxkLg==</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Base64 Encoded User Data</p>
<p>Unlike the <code>CloudInit</code> transport which accepts user data as either plain-text or base64-encoded, the <code>OvfEnv</code> provider requires the base64-encoding. The base64-encoded value above decodes to:</p>
<div class="highlight"><pre><span></span><code><span class="c1">#cloud-config</span>
<span class="nt">users</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">akutz</span>
<span class="w">  </span><span class="nt">primary_group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">akutz</span>
<span class="w">  </span><span class="nt">groups</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">users</span>
<span class="w">  </span><span class="nt">ssh_authorized_keys</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDSL7uWGj...</span>
<span class="nt">runcmd</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;ls</span><span class="nv"> </span><span class="s">/&quot;</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="w"> </span><span class="s">&quot;ls&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;-a&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;-l&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;/&quot;</span><span class="w"> </span><span class="p p-Indicator">]</span>
<span class="nt">write_files</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/my-plaintext</span>
<span class="w">  </span><span class="nt">permissions</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;0644&#39;</span>
<span class="w">  </span><span class="nt">owner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root:root</span>
<span class="w">  </span><span class="nt">content</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">Hello, world.</span>
</code></pre></div>
</div>
</div>
</div>
</div>
<h3 id="extraconfig">ExtraConfig</h3>
<p>The <code>ExtraConfig</code> provider combined VMware's Guest OS Customization (GOSC) for bootstrapping a guest's network allowed clients to set any <code>guestinfo</code> key they wanted in order to influence a guest's bootstrap engine.</p>
<div class="admonition warning">
<p class="admonition-title">Deprecation Notice</p>
<p>When Tanzu Kubernetes was first released, the Cluster API provider that depended upon VM Operator used the <code>ExtraConfig</code> provider for supplying bootstrap information. This method was never intended for wide use, and Tanzu now uses Cloud-Init anyway. To that end, this provider is no longer supported and will be removed in v1alpha2. Any consumers still relying on this provider should switch to Cloud-Init.</p>
</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.a264c092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.726fbb30.min.js"></script>
      
    
  </body>
</html>